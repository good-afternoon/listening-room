THREE.OrbitControls=function(e,t){function n(){return 2*Math.PI/60/60*N.autoRotateSpeed}function o(){return Math.pow(.95,N.zoomSpeed)}function a(e){Y.theta-=e}function i(e){Y.phi-=e}function r(e){N.object.isPerspectiveCamera?Z/=e:N.object.isOrthographicCamera?(N.object.zoom=Math.max(N.minZoom,Math.min(N.maxZoom,N.object.zoom*e)),N.object.updateProjectionMatrix(),F=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),N.enableZoom=!1)}function s(e){N.object.isPerspectiveCamera?Z*=e:N.object.isOrthographicCamera?(N.object.zoom=Math.max(N.minZoom,Math.min(N.maxZoom,N.object.zoom/e)),N.object.updateProjectionMatrix(),F=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),N.enableZoom=!1)}function c(e){I.set(e.clientX,e.clientY)}function u(e){q.set(e.clientX,e.clientY)}function l(e){_.set(e.clientX,e.clientY)}function m(e){X.set(e.clientX,e.clientY),K.subVectors(X,I).multiplyScalar(N.rotateSpeed);var t=N.domElement===document?N.domElement.body:N.domElement;a(2*Math.PI*K.x/t.clientHeight),i(2*Math.PI*K.y/t.clientHeight),I.copy(X),N.update()}function d(e){Q.set(e.clientX,e.clientY),W.subVectors(Q,q),W.y>0?r(o()):W.y<0&&s(o()),q.copy(Q),N.update()}function p(e){G.set(e.clientX,e.clientY),B.subVectors(G,_).multiplyScalar(N.panSpeed),ee(B.x,B.y),_.copy(G),N.update()}function h(e){}function E(e){e.deltaY<0?s(o()):e.deltaY>0&&r(o()),N.update()}function b(e){switch(e.preventDefault(),e.keyCode){case N.keys.UP:ee(0,N.keyPanSpeed),N.update();break;case N.keys.BOTTOM:ee(0,-N.keyPanSpeed),N.update();break;case N.keys.LEFT:ee(N.keyPanSpeed,0),N.update();break;case N.keys.RIGHT:ee(-N.keyPanSpeed,0),N.update()}}function f(e){I.set(e.touches[0].pageX,e.touches[0].pageY)}function g(e){if(N.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);q.set(0,o)}if(N.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);_.set(a,i)}}function T(e){X.set(e.touches[0].pageX,e.touches[0].pageY),K.subVectors(X,I).multiplyScalar(N.rotateSpeed);var t=N.domElement===document?N.domElement.body:N.domElement;a(2*Math.PI*K.x/t.clientHeight),i(2*Math.PI*K.y/t.clientHeight),I.copy(X),N.update()}function v(e){if(N.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);Q.set(0,o),W.set(0,Math.pow(Q.y/q.y,N.zoomSpeed)),r(W.y),q.copy(Q)}if(N.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);G.set(a,i),B.subVectors(G,_).multiplyScalar(N.panSpeed),ee(B.x,B.y),_.copy(G)}N.update()}function y(e){}function R(e){if(!1!==N.enabled){switch(e.preventDefault(),N.domElement.focus?N.domElement.focus():window.focus(),e.button){case N.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===N.enablePan)return;l(e),k=x.PAN}else{if(!1===N.enableRotate)return;c(e),k=x.ROTATE}break;case N.mouseButtons.MIDDLE:if(!1===N.enableZoom)return;u(e),k=x.DOLLY;break;case N.mouseButtons.RIGHT:if(!1===N.enablePan)return;l(e),k=x.PAN}k!==x.NONE&&(document.addEventListener("mousemove",O,!1),document.addEventListener("mouseup",H,!1),N.dispatchEvent(A))}}function O(e){if(!1!==N.enabled)switch(e.preventDefault(),k){case x.ROTATE:if(!1===N.enableRotate)return;m(e);break;case x.DOLLY:if(!1===N.enableZoom)return;d(e);break;case x.PAN:if(!1===N.enablePan)return;p(e)}}function H(e){!1!==N.enabled&&(h(e),document.removeEventListener("mousemove",O,!1),document.removeEventListener("mouseup",H,!1),N.dispatchEvent(D),k=x.NONE)}function w(e){!1===N.enabled||!1===N.enableZoom||k!==x.NONE&&k!==x.ROTATE||(e.preventDefault(),e.stopPropagation(),N.dispatchEvent(A),E(e),N.dispatchEvent(D))}function P(e){!1!==N.enabled&&!1!==N.enableKeys&&!1!==N.enablePan&&b(e)}function j(e){if(!1!==N.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===N.enableRotate)return;f(e),k=x.TOUCH_ROTATE;break;case 2:if(!1===N.enableZoom&&!1===N.enablePan)return;g(e),k=x.TOUCH_DOLLY_PAN;break;default:k=x.NONE}k!==x.NONE&&N.dispatchEvent(A)}}function L(e){if(!1!==N.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===N.enableRotate)return;if(k!==x.TOUCH_ROTATE)return;T(e);break;case 2:if(!1===N.enableZoom&&!1===N.enablePan)return;if(k!==x.TOUCH_DOLLY_PAN)return;v(e);break;default:k=x.NONE}}function M(e){!1!==N.enabled&&(y(e),N.dispatchEvent(D),k=x.NONE)}function C(e){!1!==N.enabled&&e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:THREE.MOUSE.LEFT,MIDDLE:THREE.MOUSE.MIDDLE,RIGHT:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return U.phi},this.getAzimuthalAngle=function(){return U.theta},this.saveState=function(){N.target0.copy(N.target),N.position0.copy(N.object.position),N.zoom0=N.object.zoom},this.reset=function(){N.target.copy(N.target0),N.object.position.copy(N.position0),N.object.zoom=N.zoom0,N.object.updateProjectionMatrix(),N.dispatchEvent(S),N.update(),k=x.NONE},this.update=function(){var t=new THREE.Vector3,o=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),i=o.clone().inverse(),r=new THREE.Vector3,s=new THREE.Quaternion;return function(){var e=N.object.position;return t.copy(e).sub(N.target),t.applyQuaternion(o),U.setFromVector3(t),N.autoRotate&&k===x.NONE&&a(n()),U.theta+=Y.theta,U.phi+=Y.phi,U.theta=Math.max(N.minAzimuthAngle,Math.min(N.maxAzimuthAngle,U.theta)),U.phi=Math.max(N.minPolarAngle,Math.min(N.maxPolarAngle,U.phi)),U.makeSafe(),U.radius*=Z,U.radius=Math.max(N.minDistance,Math.min(N.maxDistance,U.radius)),N.target.add(z),t.setFromSpherical(U),t.applyQuaternion(i),e.copy(N.target).add(t),N.object.lookAt(N.target),!0===N.enableDamping?(Y.theta*=1-N.dampingFactor,Y.phi*=1-N.dampingFactor,z.multiplyScalar(1-N.dampingFactor)):(Y.set(0,0,0),z.set(0,0,0)),Z=1,!!(F||r.distanceToSquared(N.object.position)>V||8*(1-s.dot(N.object.quaternion))>V)&&(N.dispatchEvent(S),r.copy(N.object.position),s.copy(N.object.quaternion),F=!1,!0)}}(),this.dispose=function(){N.domElement.removeEventListener("contextmenu",C,!1),N.domElement.removeEventListener("mousedown",R,!1),N.domElement.removeEventListener("wheel",w,!1),N.domElement.removeEventListener("touchstart",j,!1),N.domElement.removeEventListener("touchend",M,!1),N.domElement.removeEventListener("touchmove",L,!1),document.removeEventListener("mousemove",O,!1),document.removeEventListener("mouseup",H,!1),window.removeEventListener("keydown",P,!1)};var N=this,S={type:"change"},A={type:"start"},D={type:"end"},x={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},k=x.NONE,V=1e-6,U=new THREE.Spherical,Y=new THREE.Spherical,Z=1,z=new THREE.Vector3,F=!1,I=new THREE.Vector2,X=new THREE.Vector2,K=new THREE.Vector2,_=new THREE.Vector2,G=new THREE.Vector2,B=new THREE.Vector2,q=new THREE.Vector2,Q=new THREE.Vector2,W=new THREE.Vector2,J=function(){var e=new THREE.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),z.add(e)}}(),$=function(){var e=new THREE.Vector3;return function(t,n){!0===N.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(N.object.up,e)),e.multiplyScalar(t),z.add(e)}}(),ee=function(){var e=new THREE.Vector3;return function(t,n){var o=N.domElement===document?N.domElement.body:N.domElement;if(N.object.isPerspectiveCamera){var a=N.object.position;e.copy(a).sub(N.target);var i=e.length();i*=Math.tan(N.object.fov/2*Math.PI/180),J(2*t*i/o.clientHeight,N.object.matrix),$(2*n*i/o.clientHeight,N.object.matrix)}else N.object.isOrthographicCamera?(J(t*(N.object.right-N.object.left)/N.object.zoom/o.clientWidth,N.object.matrix),$(n*(N.object.top-N.object.bottom)/N.object.zoom/o.clientHeight,N.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),N.enablePan=!1)}}();N.domElement.addEventListener("contextmenu",C,!1),N.domElement.addEventListener("mousedown",R,!1),N.domElement.addEventListener("wheel",w,!1),N.domElement.addEventListener("touchstart",j,!1),N.domElement.addEventListener("touchend",M,!1),N.domElement.addEventListener("touchmove",L,!1),window.addEventListener("keydown",P,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});